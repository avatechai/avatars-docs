---
title: Vercel AI Chatbot Demo
---

## Integrate with Vercel AI SDK

<Note
  title="Note"
  type="note"
>
  This demo shows how to integrate with Vercel AI SDK https://github.com/vercel-labs/ai-chatbot to create a chatbot with avatar display.
</Note>

Using the `createAvatar` hook creator, gives you helper config to setup your avatar persona easily with emotion mapping.

```jsx
import { ElevenLabVoiceService } from '@avatechai/avatars'
import { createAvatar } from '@avatechai/avatars/react'

const useMyAvatar = createAvatar({
  emotionMapping: {},
  characterPrompt: {
    name: 'Your character name',
    context: `Background story`,
    exampleReplies: [
      "Hello! I love programming!"
    ]
  },
  avatarDisplayProps: {
    audioService: ,
    avatarId: 'avatarId',
  }
})
```

Integrate the avatrar display in your react tree.

```jsx chat.tsx
const useNahida = createAvatar({
  emotionMapping: {
    happy: 'lh.exp3.json',
    sad: 'hei.exp3.json',
    angry: 'sq.exp3.json',
    surprised: 'xx.exp3.json',
    neutral: 'zs2.exp3.json',
    mix: 'zs3.exp3.json'
  },
  characterPrompt: {
    name: 'Nahida',
    context: `
      You are a game character
      You are fighting enemy, you are in a battle.
      You are being sad now
      Eating ice cream will makes you happy
      You are the vessel of Buer, as Lesser Lord Kusanali, 
      the current Dendro Archon. Having been freed from her 
      extensive confinement in the Sanctuary of Surasthana, 
      you now strives to have a stronger presence in Sumeru.
      `,
    exampleReplies: [
      'I am Nahida, a playable Dendro character in Genshin Impact.',
      'Have you played genshin impact today?',
      'I am feel a bit sad'
    ]
  },
  avatarDisplayProps: {
    audioService: new ElevenLabVoiceService(
      '4a08cbc5553e092ad42586734f85fda0',
      'eleven_monolingual_v1',
      'QhxzYbewunyK1DkQ9rHC'
    ),
    avatarId: '5118f46f-2cb4-4ce1-9b75-f0ac659fc3fc',
  }
})

```

Using the avatar hook you created!

```jsx chat.tsx

// Using the hook
const { handleFirstInteractionAudio, avatarDisplay } = useNahida({
  append: append,
  messages: messages,
  isLoading: isLoading,
  avatarDisplayProps: {
    className:
      '!fixed inset-x-0 bottom-0 mx-auto h-[36rem] w-full sm:max-w-2xl sm:px-4 ',
    y: 200,
    x: 120
  }
})

// Including the avatar display in your react tree
return <>
  {avatarDisplay}
</>
```

Make sure to trigger the audio playback setup on first interaction

```jsx chat.tsx
<ChatPanel
  id={id}
  isLoading={isLoading}
  stop={stop}
  append={input => {
    handleFirstInteractionAudio()
    return append(input)
  }}
  reload={reload}
  messages={messages}
  input={input}
  setInput={setInput}
/>
```

In order to remove the emotion tag from the prompt, you can use the `removeEmotionFromPrompt` helper function.

```jsx chat-message.tsx
import { removeEmotionFromPrompt } from '@avatechai/avatars'
...
{removeEmotionFromPrompt(message.content)}
```